<!DOCTYPE html>
<html>
  <head>
    <title>New Haven Report Card</title>
    <link href='css/bootstrap.min.css' rel='stylesheet'>
    <link href='css/main.css' rel='stylesheet'>
    <link href='css/stylesheet.css' rel='stylesheet'>
  </head>

  <!-- body -->
  <body class="col-xs-12">
    <div class='navbar navbar-default navbar-static-top'>
      <div class='container'>
        <a href='/nhrc' class='navbar-brand'>New Haven Report Card</a>

        <ul class='nav navbar-nav navbar-right'>
          <li><a href='http://seeclickfix.com' target='new'>Dashboard</a></li>
          <li><a href='http://seeclickfix.com' target='new'>Pothole Evolution</a></li>
          <li><a href='http://seeclickfix.com' target='new'>See Click Fix</a></li>
        </ul>
      </div>
    </div>
<!-- end of navbar -->

<!-- beginning of main content -->

<!--
<div class="col-md-6">
  <div class="project-certification"></div>
    <div class="simple-bars-wrapper">
      <div class="vertical-separator"></div>      
    </div>
</div>
-->
<div class="col-md-6 grades">
    <div class="certification-header">
        <span class="grade-A large">A</span>
        <span class="certification-title">Overall Grade</span>
    </div>

    <div class="simple-bar-with-heading col-xs-12" data-name="Code Complexity">
        <div class="simple-bar-header">
            
                <span class="header-name">% Completed Cases</span>
            
            <span class="simple-bar-info" data-toggle="popover" data-trigger="hover" data-placement="top" title="" data-content="The 'Code Complexity' level in your code is at 100%" data-original-title="Code Complexity">
                <i class="fa fa-question-circle"></i>
            </span>
        </div>

        <div class="simple-bar-body">
            <div class="progress simple-bar-A ">
                <div class="progress-bar progress-bar-primary" style="width: 100%">
                </div>
            </div>

            <div class="percentage">
                <span class="percentage-value">100%</span>
            </div>
        </div>
    </div>

    <div class="project-certification">
    <div class="simple-bars-wrapper">
        <div class="bars-column col-xs-12 col-sm-6">

            <div class="simple-bar-with-heading" data-name="Code Style">
                <div class="simple-bar-header">
                
                    <span class="header-name">Average Time to Close</span>
                
                    <span class="simple-bar-info" data-toggle="popover" data-trigger="hover" data-placement="top" title="" data-content="The 'Code Style' level in your code is at 100%" data-original-title="Code Style">
                        <i class="fa fa-question-circle"></i>
                    </span>
                </div>

                <div class="simple-bar-body">
                    <div class="progress simple-bar-A ">
                        <div class="progress-bar progress-bar-primary" style="width: 100%">
                            <div class="percentage">
                                <span class="percentage-value">100%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bars-column col-xs-12 col-sm-6">
            <div class="simple-bar-with-heading" data-name="Compatibility">
                <div class="simple-bar-header">
                    
                        <span class="header-name">Average Time to Acknowledge</span>
                    
                    <span class="simple-bar-info" data-toggle="popover" data-trigger="hover" data-placement="top" title="" data-content="The 'Compatibility' level in your code is at 100%" data-original-title="Compatibility">
                        <i class="fa fa-question-circle"></i>
                    </span>
                </div>

                <div class="simple-bar-body">
                    <div class="progress simple-bar-A ">
                        <div class="progress-bar progress-bar-primary" style="width: 100%">
                            <div class="percentage">
                                <span class="percentage-value">100%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>
<div class="col-md-6">
    <div id="map"></div>
    <div id="layer_selector" class="cartodb-infobox">
      <ul>
        <li data="all" class="selected">All countries</li>
        <!--<li data="1000">area >1000 km<sup>2</sup></li>
        <li data="6000">area >6000 km<sup>2</sup></li>
        <li data="10000">area >10000 km<sup>2</sup></li>
        <li data="50000">area >50000 km<sup>2</sup></li>-->
      </ul>
    </div>
    <!-- include cartodb.js library -->
    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.11/cartodb.js"></script>

    <script>
      // create layer selector
      function createSelector(layer) {
        var sql = new cartodb.SQL({ user: 'documentation' });

        var $options = $('#layer_selector li');
        $options.click(function(e) {
          // get the area of the selected layer
          var $li = $(e.target);
          var area = $li.attr('data');

          // deselect all and select the clicked one
          $options.removeClass('selected');
          $li.addClass('selected');

          // create query based on data from the layer
          var query = "SELECT * FROM seeclickfixtest1";

          //DO sequal selections here
          if(area !== 'all') {
            query = "select * from european_countries_e where area > " + area;
          }

          // change the query in the layer to update the map
          layer.setSQL(query);
        });
      }

      function main() {
        cartodb.createVis('map', 'http://khof312.cartodb.com/api/v2/viz/4481db7c-d567-11e4-a8b5-0e0c41326911/viz.json', {
          tiles_loader: true,
          center_lat: 50,
          center_lon: 20,
          zoom: 3
        })
        .done(function(vis, layers) {
          // layer 0 is the base layer, layer 1 is cartodb layer
          var subLayer = layers[1].getSubLayer(0);
          createSelector(subLayer);
        })
        .error(function(err) {
          console.log(err);
        });
      }

      window.onload = main;
    </script>
    
</div>

<!-- footer section -->

<div class="container">
  <div class="row spacer-bottom"></div>
</div>


<!-- footer -->
<div class='footer navbar navbar-fixed-bottom'>
  <div class='container'>
    <div class='row'>
      
    </div>
  </div>
</div>


    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
    <script src='js/bootstrap.min.js'></script>
    <script src='js/moment.min.js'></script>
    <script src='js/d3.min.js'></script>
    <script src='js/d3.legend.js'></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
<!--    <script src='js/environ.js'></script> -->
  </body>
</html>